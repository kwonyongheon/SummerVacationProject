<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HCI.gaming</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/inquiry.css">
</head>
<body>
<header class="p-3 bg-dark text-white">
    <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                <li>
                    <a th:href="@{/index}" class="nav-link px-2 text-white">
                        <span class="text-danger brand-text move-left">HCI.</span>
                        <span class="text-warning brand-text move-left">gaming</span>
                    </a>
                </li>
                <!-- ... 나머지 헤더 메뉴 ... -->
            </ul>
            <div class="header-buttons">
                <!-- 로그인 상태에 따른 버튼 표시 -->
                <div th:if="${#authorization.expression('isAuthenticated()')}">
                    <a th:href="@{/member-info/{id}(id=${#authentication.getPrincipal().id})}"
                       class="text-white text-decoration-none me-3 hover-text-pink"><span
                            sec:authentication="name"></span> 님 =&gt;</a>
                    <a th:href="@{/logout}" class="btn btn-outline-light me-2">로그아웃</a>
                    <div sec:authorize="hasAuthority('ROLE_ADMIN')" class="d-inline">
                        <a th:href="@{/admin/setting}" class="btn btn-outline-danger me-2">관리자 설정</a>
                    </div>
                </div>
                <div th:unless="${#authorization.expression('isAuthenticated()')}">
                    <a th:href="@{/login}" class="btn btn-outline-light me-2">로그인</a>
                    <a th:href="@{/join}" class="btn btn-outline-light me-2">회원가입</a>
                </div>
            </div>
        </div>
    </div>
</header>

<div class="container my-5">
    <!-- Tabs navigation -->
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link custom-orange active" id="gallery-tab" data-bs-toggle="tab"
                    data-bs-target="#gallery" type="button" role="tab" aria-controls="gallery" aria-selected="true">
                문의 요청
            </button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link custom-orange" id="responses-tab" data-bs-toggle="tab" data-bs-target="#responses"
                    type="button" role="tab" aria-controls="responses" aria-selected="false">
                답변 내역
            </button>
        </li>
    </ul>

    <!-- Tabs content -->
    <div class="tab-content" id="myTabContent">
        <!--  문의 요청 -->
        <div class="tab-pane fade show active" id="gallery" role="tabpanel" aria-labelledby="gallery-tab">
            <div class="mt-4">
                <h2 class="mb-4">문의</h2>
                <!-- 요청 상태에 따른 메시지 표시 -->
                <div th:if="${status == 'galleryRequestSuccess'}" class="alert alert-success" role="alert">
                    갤러리 개설 요청이 성공적으로 접수되었습니다!
                </div>
                <div th:if="${status == 'galleryRequestFail'}" class="alert alert-danger" role="alert">
                    갤러리 개설 요청에 실패하였습니다. 다시 시도해 주세요.
                </div>
                <div th:if="${status == 'otherInquirySuccess'}" class="alert alert-success" role="alert">
                    문의가 성공적으로 접수되었습니다!
                </div>
                <div th:if="${status == 'otherInquiryFail'}" class="alert alert-danger" role="alert">
                    문의 접수에 실패하였습니다. 다시 시도해 주세요.
                </div>

                <form id="inquiryForm" th:action="@{/inquiry/gallerySend}" method="post">
                    <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}"/>
                    <div class="mb-3">
                        <label for="inquiryTypeSelect" class="form-label">문의 종류 선택:</label>
                        <select class="form-select" id="inquiryTypeSelect" name="inquiryType" required>
                            <option value="" selected disabled>문의 종류를 선택하세요</option>
                            <option value="GALLERY_REQUEST">갤러리 개설 요청</option>
                            <option value="OTHER_INQUIRY">기타 문의</option>
                        </select>
                    </div>

                    <!-- 갤러리 개설 요청 입력 필드 -->
                    <div id="galleryRequestFields" class="inquiry-fields">
                        <div class="mb-3">
                            <label for="galleryTypeSelect" class="form-label">갤러리 타입 선택:</label>
                            <select class="form-select" id="galleryTypeSelect" name="galleryBoardType">
                                <option value="" selected disabled>갤러리 타입을 선택하세요</option>
                                <li th:each="boardType : ${galleryBoardTypes}">
                                    <option th:value="${boardType.toString()}" th:text="${boardType.viewName}"></option>
                                </li>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="gallery-name" class="form-label">갤러리 이름:</label>
                            <input type="text" class="form-control" id="gallery-name" name="title"
                                   placeholder="갤러리 이름을 입력하세요">
                        </div>
                        <div class="mb-3">
                            <label for="request-reason" class="form-label">갤러리 설명, 개설 요청 이유:</label>
                            <textarea class="form-control" id="request-reason" name="content" rows="4"
                                      placeholder="개설 요청 이유를 작성하세요"></textarea>
                        </div>
                        <button th:action="@{/gallerySend}" type="submit" class="btn btn-primary">갤러리 개설 요청</button>
                    </div>

                    <!-- 기타 문의 입력 필드 -->
                    <div id="otherInquiryFields" class="inquiry-fields" style="display: none;">
                        <div class="mb-3">
                            <label for="inquiry-title" class="form-label">문의 제목:</label>
                            <input type="text" class="form-control" id="inquiry-title" name="title"
                                   placeholder="문의 제목을 입력하세요">
                        </div>
                        <div class="mb-3">
                            <label for="inquiry-content" class="form-label">문의 내용:</label>
                            <textarea class="form-control" id="inquiry-content" name="content" rows="6"
                                      placeholder="문의 내용을 작성하세요"></textarea>
                        </div>
                        <button th:action="@{/gallerySend}" type="submit" class="btn btn-primary">문의 접수</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- 답변 내역 -->
        <div class="tab-pane fade" id="responses" role="tabpanel" aria-labelledby="responses-tab">
            <div class="mt-4">
                <h2 class="mb-4">답변 내역</h2>

                <!-- 답변 목록을 반복하여 표시 -->
                <button id="loadResponsesButton" class="btn btn-primary mb-3" type="button">답변 보기</button>
                <div class="list-group" id="responsesList">
                    <!-- 답변이 여기에 로드됩니다 -->
                </div>
            </div>
        </div>
    </div>
</div>

<footer class="text-center bg-dark">
    <p>Copyright © 2024 HCI. gaming. All rights reserved.</p>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/inquire.js"></script>
</body>
</html>
