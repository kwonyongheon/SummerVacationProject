<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HCI.gaming - My Page</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/myPage.css">
</head>

<body>
<!-- Header start -->
<header class="bg-dark">
    <div class="container header">
        <h1>
            <a th:href="@{/index}" class="nav-link px-2">
                <span class="text-danger brand-text">HCI.</span>
                <span class="text-warning brand-text">gaming</span>
            </a>
        </h1>
    </div>
</header>
<!-- Header end -->

<!-- Sub-Menu -->
<div class="sub-menu d-flex justify-content-center">
    <div class="dropdown">
        <a class="dropdown-toggle" href="#" role="button" id="galleryDropdown" data-bs-toggle="dropdown"
           aria-expanded="false">
            갤러리
        </a>
        <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <li><a class="dropdown-item" th:each="gallry : ${Galleries}" th:text="${gallry.name}" th:href="@{/Gallery/{id}(id = ${gallry.id})}"></a></li>
        </ul>
    </div>
    <span>|</span>
    <div class="dropdown">
        <a class="dropdown-toggle" th:href="@{/MinorGallery/list}" role="button" id="memberGalleryDropdown"
           data-bs-toggle="dropdown" aria-expanded="false">
            회원갤러리
        </a>
        <ul class="dropdown-menu" aria-labelledby="memberGalleryDropdown">
            <li><a class="dropdown-item" th:href="@{/m-create}">게시판을 개설해보세요!</a></li>
        </ul>
    </div>
    <span>|</span>
    <a th:href="@{/champions}">챔피언분석</a> |
    <a href="#">문의하기</a> |
    <a th:href="@{/myPage}">마이페이지</a>
</div>
<!-- Sub-Menu end -->

<!-- Main Content -->
<div class="container mt-4">
    <div class="row">
        <!-- Aside Section -->
        <aside class="col-md-3" style="padding-left: 200px; font-size: 1.5rem;">
            <div class="list-group">
                광고주세요. 01029539552 광고주세요. 01029539552광고주세요. 01029539552광고주세요. 01029539552광고주세요. 01029539552광고주세요. 01029539552
            </div>
        </aside>

        <!-- Profile Section -->
        <div class="col-md-9 offset-md-3">
            <!-- 내 정보 -->
            <div class="content-section">
                <h4>내 정보</h4>
                <div class="row">
                    <ul class="list-group">
                        <li class="list-group-item" th:text="'닉네임: ' + ${member.nickName}"></li>
                        <li class="list-group-item" th:text="'이메일: ' + ${member.email}"></li>
                        <li class="list-group-item" th:text="'생년월일: ' + ${member.birth}"></li>
                        <li class="list-group-item" th:text="'가입일: ' + ${#temporals.format(member.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></li>
                        <li class="list-group-item">
                            <a th:href="@{/member-info/{id}(id=${#authentication.getPrincipal().id})}">더 많은 내 정보 확인 및 수정하러 가기 =></a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 내 갤러리 -->
            <div class="content-section">
                <h4>내 회원갤러리</h4>
                <div class="row">
                    <p class="text-white" th:if="${#lists.isEmpty(galleries)}">개설한 회원갤러리가 없습니다.</p>
                    <ul class="list-group" th:each="gallery : ${galleries}" th:if="${!#lists.isEmpty(galleries)}">
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <a class="myPageInfo" th:href="@{/MinorGallery/{id}(id = ${gallery.galleryId})}">
                                <span class="gallery-name" th:text="'회원갤러리 이름: ' + ${gallery.name}"></span>
                                <span class="gallery-date" th:text="'개설일: ' + ${#temporals.format(gallery.createdAt, 'yyyy-MM-dd')}"></span>
                            </a>
                            <div>
                                <a class="btn btn-warning btn-sm" id="edit"
                                   data-bs-toggle="modal"
                                   data-bs-target="#editGalleryModal"
                                   th:data-gallery-id="${gallery.galleryId}"
                                   th:data-gallery-name="${gallery.name}"
                                   th:data-gallery-details="${gallery.description}">수정</a>
                                <a class="btn btn-danger btn-sm" id="delete" th:data-gallery-id="${gallery.galleryId}">삭제</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 내 게시물 -->
            <div class="content-section">
                <h4>내 게시물</h4><span class="text-danger small">해당 게시물 클릭 후 삭제 및 수정 가능</span>
                <p class="text-white" th:if="${#lists.isEmpty(posts)}">작성한 게시글이 없습니다.</p>
                <ul class="list-group" th:each="post : ${posts}" th:if="${!#lists.isEmpty(posts)}">
                    <li class="list-group-item d-flex justify-content-between align-items-center" th:if="${post.minorGallery != null}">
                        <a class="myPageInfo2" th:href="@{/MinorGallery/post/{id}(id = ${post.postId})}">
                            <span class="gallery-name" th:text="'게시물 제목: ' + ${post.title}"></span>
                            <span class="gallery-date" th:text="'작성일: ' + ${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></span>
                        </a>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center" th:if="${post.gallery != null}">
                        <a class="myPageInfo2" th:href="@{/Gallery/post/{id}(id = ${post.postId})}">
                            <span class="gallery-name" th:text="'게시물 제목: ' + ${post.title}"></span>
                            <span class="gallery-date" th:text="'작성일: ' + ${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm:ss')}"></span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- 내 댓글 -->
            <div class="content-section">
                <h4>댓글</h4><span class="text-danger small">해당 게시물 클릭 후 삭제 및 수정 가능</span>
                <p class="text-white" th:if="${#lists.isEmpty(comments)}">작성한 댓글이 없습니다.</p>
                <ul class="list-group" th:each="comment : ${comments}" th:if="${!#lists.isEmpty(comments)}">
                    <li class="list-group-item d-flex justify-content-between align-items-center" th:if="${comment.post.minorGallery != null}">
                        <a class="myPageInfo2" th:href="@{/MinorGallery/post/{id}(id = ${comment.post.postId})}">
                            <span class="gallery-name" th:text="'게시물 제목: ' + ${comment.post.title}"></span>
                            <span class="gallery-date" th:text="'댓글 내용: ' + ${comment.content}"></span>
                        </a>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center" th:if="${comment.post.gallery != null}">
                        <a class="myPageInfo2" th:href="@{/Gallery/post/{id}(id = ${comment.post.postId})}">
                            <span class="gallery-name" th:text="'게시물 제목: ' + ${comment.post.title}"></span>
                            <span class="gallery-date" th:text="'댓글 내용: ' + ${comment.content}"></span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="text-center text-white mt-5 mb-3">
    <p>Copyright © 2024 HCI. gaming. All rights reserved.</p>
</footer>
<!-- Footer end -->

<!-- Edit Gallery Modal -->
<div class="modal fade" id="editGalleryModal" tabindex="-1" aria-labelledby="editGalleryModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editGalleryModalLabel">갤러리 수정</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3">
                        <label for="galleryName" class="form-label">갤러리 이름</label>
                        <input type="text" class="form-control" id="galleryName" placeholder="갤러리 이름을 입력하세요" required>
                    </div>
                    <div class="mb-3">
                        <label for="galleryDetails" class="form-label">갤러리 세부정보</label>
                        <textarea class="form-control" id="galleryDetails" rows="3" placeholder="갤러리 세부정보를 입력하세요" required></textarea>
                    </div>
                    <input type="hidden" name="galleryId" id="galleryId">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
                <button type="button" class="btn btn-primary" id="editGallery">저장</button>
            </div>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="/js/myPage.js"></script>
</body>

</html>
